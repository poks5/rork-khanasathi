import { Food } from '@/types/food';
import AsyncStorage from '@react-native-async-storage/async-storage';

const ADMIN_FOODS_KEY = 'admin_foods_overrides';

interface FoodOverride {
  id: string;
  image?: string;
  nameEn?: string;
  nameNe?: string;
  safetyLevel?: 'safe' | 'caution' | 'avoid';
  nutrients?: Partial<Food['nutrients']>;
  preparationTips?: { en: string; ne: string }[];
  medicalNotes?: { en: string; ne: string }[];
}

let foodOverrides: Record<string, FoodOverride> = {};
let overridesLoaded = false;

// Load overrides from storage (lazy)
const loadFoodOverrides = async () => {
  if (overridesLoaded) return;
  
  try {
    const stored = await AsyncStorage.getItem(ADMIN_FOODS_KEY);
    if (stored) {
      foodOverrides = JSON.parse(stored);
    }
    overridesLoaded = true;
  } catch (error) {
    console.error('Failed to load food overrides:', error);
    overridesLoaded = true; // Prevent infinite retries
  }
};

// Function to apply overrides to a food item (async for lazy loading)
const applyOverrides = async (food: Food): Promise<Food> => {
  await loadFoodOverrides();
  
  const override = foodOverrides[food.id];
  if (!override) return food;

  return {
    ...food,
    ...(override.image && { image: override.image }),
    ...(override.nameEn && { nameEn: override.nameEn }),
    ...(override.nameNe && { nameNe: override.nameNe }),
    ...(override.safetyLevel && { safetyLevel: override.safetyLevel }),
    ...(override.nutrients && { nutrients: { ...food.nutrients, ...override.nutrients } }),
    ...(override.preparationTips && { preparationTips: override.preparationTips }),
    ...(override.medicalNotes && { medicalNotes: override.medicalNotes }),
  };
};

// Synchronous version for immediate use (without overrides)
const applyOverridesSync = (food: Food): Food => {
  if (!overridesLoaded) return food;
  
  const override = foodOverrides[food.id];
  if (!override) return food;

  return {
    ...food,
    ...(override.image && { image: override.image }),
    ...(override.nameEn && { nameEn: override.nameEn }),
    ...(override.nameNe && { nameNe: override.nameNe }),
    ...(override.safetyLevel && { safetyLevel: override.safetyLevel }),
    ...(override.nutrients && { nutrients: { ...food.nutrients, ...override.nutrients } }),
    ...(override.preparationTips && { preparationTips: override.preparationTips }),
    ...(override.medicalNotes && { medicalNotes: override.medicalNotes }),
  };
};

export const foodDatabase: Food[] = [
  // GRAINS & STARCHES
  {
    id: 'rice-white',
    nameEn: 'White Rice (Cooked)',
    nameNe: 'सेतो भात',
    category: 'grains',
    subcategory: 'rice',
    image: 'https://images.unsplash.com/photo-1536304993881-ff6e9eefa2a6?w=200',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 158,
    volumeMl: 240,
    nutrients: {
      calories: 205,
      protein: 4.3,
      carbohydrates: 45,
      fat: 0.4,
      fiber: 0.6,
      potassium: 55,
      phosphorus: 68,
      sodium: 2,
      calcium: 16,
      fluid: 108,
      iron: 1.9,
      zinc: 0.8,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Rinse rice before cooking to reduce potassium', ne: 'पोटासियम कम गर्न पकाउनु अघि चामल धुनुहोस्' },
      { en: 'Use excess water and drain to reduce minerals', ne: 'खनिज कम गर्न धेरै पानी प्रयोग गरेर पानी फाल्नुहोस्' },
    ],
    alternativeNames: {
      en: ['steamed rice', 'boiled rice'],
      ne: ['उमालेको भात', 'पकाएको चामल']
    },
  },
  {
    id: 'rice-brown',
    nameEn: 'Brown Rice (Cooked)',
    nameNe: 'खैरो भात',
    category: 'grains',
    subcategory: 'rice',
    image: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=200',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 195,
    volumeMl: 240,
    nutrients: {
      calories: 216,
      protein: 5,
      carbohydrates: 45,
      fat: 1.8,
      fiber: 3.5,
      potassium: 84,
      phosphorus: 150,
      sodium: 10,
      calcium: 20,
      fluid: 142,
      iron: 0.8,
      zinc: 1.2,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Higher in phosphorus than white rice - limit portions', ne: 'सेतो भात भन्दा बढी फस्फोरस - मात्रा सीमित गर्नुहोस्' },
    ],
  },
  {
    id: 'roti',
    nameEn: 'Wheat Roti',
    nameNe: 'गहुँको रोटी',
    category: 'grains',
    subcategory: 'bread',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/3l8y2yh42smvnasqrydam',
    defaultPortion: 1,
    unitEn: 'piece',
    unitNe: 'पिस',
    weightGrams: 40,
    nutrients: {
      calories: 104,
      protein: 3.5,
      carbohydrates: 18,
      fat: 2.3,
      fiber: 1.9,
      potassium: 67,
      phosphorus: 58,
      sodium: 191,
      calcium: 7,
      fluid: 12,
      iron: 1.1,
      zinc: 0.4,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'white-bread',
    nameEn: 'White Bread',
    nameNe: 'सेतो रोटी',
    category: 'grains',
    subcategory: 'bread',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/5iqkngv5be4prtbgfmhio',
    defaultPortion: 1,
    unitEn: 'slice',
    unitNe: 'टुक्रा',
    weightGrams: 25,
    nutrients: {
      calories: 67,
      protein: 2.3,
      carbohydrates: 12.7,
      fat: 0.8,
      fiber: 0.8,
      potassium: 33,
      phosphorus: 25,
      sodium: 170,
      calcium: 32,
      fluid: 9,
      iron: 0.9,
      zinc: 0.2,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'fried-rice',
    nameEn: 'Fried Rice',
    nameNe: 'भुटेको भात',
    category: 'grains',
    subcategory: 'rice',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/2q8gulnlvpsc2atac7vad',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 200,
    nutrients: {
      calories: 238,
      protein: 5.5,
      carbohydrates: 35,
      fat: 8.2,
      fiber: 1.2,
      potassium: 125,
      phosphorus: 85,
      sodium: 420,
      calcium: 25,
      fluid: 120,
      iron: 1.5,
      zinc: 1.1,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Use less soy sauce and salt to reduce sodium', ne: 'सोडियम कम गर्न कम सोया सस र नुन प्रयोग गर्नुहोस्' },
      { en: 'Add more vegetables for better nutrition', ne: 'राम्रो पोषणको लागि धेरै तरकारी थप्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High sodium from seasonings - limit portions', ne: 'मसलाबाट उच्च सोडियम - मात्रा सीमित गर्नुहोस्' },
    ],
  },
  {
    id: 'barley',
    nameEn: 'Barley (Cooked)',
    nameNe: 'जौ',
    category: 'grains',
    subcategory: 'ancient-grains',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/ur593ghcost1bfc9oarsf',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 157,
    nutrients: {
      calories: 193,
      protein: 3.5,
      carbohydrates: 44,
      fat: 0.7,
      fiber: 6,
      potassium: 146,
      phosphorus: 85,
      sodium: 5,
      calcium: 17,
      fluid: 108,
      iron: 2.1,
      zinc: 1.3,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Good source of fiber - helps with digestion', ne: 'फाइबरको राम्रो स्रोत - पाचनमा सहायक' },
      { en: 'Soak overnight before cooking for better texture', ne: 'राम्रो बनावटको लागि पकाउनु अघि रातभर भिजाउनुहोस्' },
    ],
    medicalNotes: [
      { en: 'Low potassium grain option with good fiber content', ne: 'राम्रो फाइबर सामग्री सहित कम पोटासियम अनाज विकल्प' },
    ],
    alternativeNames: {
      en: ['pearl barley', 'hulled barley'],
      ne: ['मोती जौ']
    },
  },
  {
    id: 'finger-millet',
    nameEn: 'Finger Millet (Cooked)',
    nameNe: 'कोदो',
    category: 'grains',
    subcategory: 'ancient-grains',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/1ilguhycgzh8l1ktp4k0w',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 174,
    nutrients: {
      calories: 207,
      protein: 4.8,
      carbohydrates: 41,
      fat: 1.5,
      fiber: 2.3,
      potassium: 195,
      phosphorus: 283,
      sodium: 6,
      calcium: 13,
      fluid: 120,
      iron: 1.3,
      zinc: 1.7,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'High in calcium and iron - nutritious grain', ne: 'क्यालसियम र फलामको उच्च - पोषक अनाज' },
      { en: 'Can be made into porridge or flatbread', ne: 'दलिया वा रोटी बनाउन सकिन्छ' },
    ],
    medicalNotes: [
      { en: 'Higher phosphorus content - moderate portions recommended', ne: 'उच्च फस्फोरस सामग्री - मध्यम मात्रा सिफारिस गरिन्छ' },
    ],
    alternativeNames: {
      en: ['ragi', 'eleusine'],
      ne: ['रागी']
    },
  },
  {
    id: 'proso-millet',
    nameEn: 'Proso Millet (Cooked)',
    nameNe: 'चिनो',
    category: 'grains',
    subcategory: 'ancient-grains',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/6msou81385kodhlxoep03',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 174,
    nutrients: {
      calories: 207,
      protein: 6,
      carbohydrates: 41,
      fat: 1.7,
      fiber: 2.2,
      potassium: 108,
      phosphorus: 285,
      sodium: 5,
      calcium: 8,
      fluid: 125,
      iron: 0.6,
      zinc: 1.4,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Good protein content for a grain', ne: 'अनाजको लागि राम्रो प्रोटिन सामग्री' },
      { en: 'Rinse well before cooking', ne: 'पकाउनु अघि राम्रोसँग धुनुहोस्' },
    ],
    medicalNotes: [
      { en: 'High phosphorus - limit portions for CKD patients', ne: 'उच्च फस्फोरस - CKD बिरामीहरूका लागि मात्रा सीमित गर्नुहोस्' },
    ],
    alternativeNames: {
      en: ['white millet', 'hog millet'],
      ne: ['सेतो कोदो']
    },
  },
  {
    id: 'maize-green-tender',
    nameEn: 'Green Maize (Tender)',
    nameNe: 'हरियो मकै (कोमल)',
    category: 'grains',
    subcategory: 'fresh-grains',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/tivdokqms1033ygqrilqh',
    defaultPortion: 1,
    unitEn: 'ear',
    unitNe: 'बाला',
    weightGrams: 90,
    nutrients: {
      calories: 77,
      protein: 3,
      carbohydrates: 17,
      fat: 1.1,
      fiber: 2.4,
      potassium: 270,
      phosphorus: 89,
      sodium: 15,
      calcium: 2,
      fluid: 76,
      iron: 0.5,
      zinc: 0.5,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Fresh tender corn - can be boiled or roasted', ne: 'ताजा कोमल मकै - उमालेर वा भुटेर खान सकिन्छ' },
      { en: 'Remove kernels and boil to reduce potassium', ne: 'पोटासियम कम गर्न दाना निकालेर उमाल्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Moderate potassium - portion control needed', ne: 'मध्यम पोटासियम - मात्रा नियन्त्रण आवश्यक' },
    ],
    alternativeNames: {
      en: ['sweet corn', 'baby corn'],
      ne: ['मिठो मकै']
    },
  },
  {
    id: 'rice-puff',
    nameEn: 'Rice Puff (Puffed Rice)',
    nameNe: 'भुजा',
    category: 'grains',
    subcategory: 'processed-grains',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/cxse2b224p2xzmjgrz8av',
    defaultPortion: 30,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 30,
    nutrients: {
      calories: 114,
      protein: 2.1,
      carbohydrates: 23,
      fat: 0.3,
      fiber: 0.4,
      potassium: 30,
      phosphorus: 34,
      sodium: 2,
      calcium: 6,
      fluid: 3,
      iron: 0.2,
      zinc: 0.4,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Very low potassium snack option', ne: 'धेरै कम पोटासियम खाजा विकल्प' },
      { en: 'Can be mixed with vegetables for chaat', ne: 'चाटको लागि तरकारीसँग मिसाउन सकिन्छ' },
    ],
    medicalNotes: [
      { en: 'Excellent low-potassium, low-sodium snack', ne: 'उत्कृष्ट कम पोटासियम, कम सोडियम खाजा' },
    ],
    alternativeNames: {
      en: ['murmura', 'mamra', 'pori'],
      ne: ['मुरमुरा']
    },
  },
  {
    id: 'sarvottam-pitho-lito',
    nameEn: 'Sarvottam Pitho (Lito)',
    nameNe: 'सर्वोत्तम पिठो (लिटो)',
    category: 'grains',
    subcategory: 'traditional-flour',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/epp0u6m9qkyk2azr1zf0b',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 342,
      protein: 11,
      carbohydrates: 72,
      fat: 1.5,
      fiber: 3.5,
      potassium: 284,
      phosphorus: 298,
      sodium: 8,
      calcium: 41,
      fluid: 12,
      iron: 4.3,
      zinc: 2.7,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Mixed grain flour - high in nutrients', ne: 'मिश्रित अनाजको पिठो - पोषक तत्वले भरपूर' },
      { en: 'Can be made into porridge or flatbread', ne: 'दलिया वा रोटी बनाउन सकिन्छ' },
      { en: 'Use smaller portions due to high phosphorus', ne: 'उच्च फस्फोरसको कारण सानो मात्रा प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High phosphorus and moderate potassium - limit portions', ne: 'उच्च फस्फोरस र मध्यम पोटासियम - मात्रा सीमित गर्नुहोस्' },
    ],
    alternativeNames: {
      en: ['mixed grain flour', 'multigrain flour'],
      ne: ['मिश्रित अनाजको पिठो']
    },
  },
  {
    id: 'vermicelli',
    nameEn: 'Vermicelli (Cooked)',
    nameNe: 'सेमी',
    category: 'grains',
    subcategory: 'pasta-noodles',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/e25zaoxcy5jdqy8d19gce',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 140,
    nutrients: {
      calories: 220,
      protein: 8,
      carbohydrates: 44,
      fat: 1.1,
      fiber: 2.5,
      potassium: 62,
      phosphorus: 76,
      sodium: 8,
      calcium: 10,
      fluid: 98,
      iron: 1.8,
      zinc: 0.7,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Low potassium pasta option', ne: 'कम पोटासियम पास्ता विकल्प' },
      { en: 'Can be prepared sweet or savory', ne: 'मिठो वा नुनिलो दुवै तरिकाले बनाउन सकिन्छ' },
      { en: 'Boil in excess water and drain', ne: 'धेरै पानीमा उमालेर पानी फाल्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Good low-potassium carbohydrate source', ne: 'राम्रो कम पोटासियम कार्बोहाइड्रेट स्रोत' },
    ],
    alternativeNames: {
      en: ['thin noodles', 'angel hair pasta'],
      ne: ['पातलो नुडल्स']
    },
  },

  // VEGETABLES - LOW POTASSIUM (SAFE)
  {
    id: 'cabbage',
    nameEn: 'Cabbage',
    nameNe: 'बन्दाकोबी',
    category: 'vegetables',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1594282486552-05b4d80fbb9f?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 25,
      protein: 1.3,
      carbohydrates: 5.8,
      fat: 0.1,
      fiber: 2.5,
      potassium: 170,
      phosphorus: 26,
      sodium: 18,
      calcium: 40,
      fluid: 92,
      iron: 0.5,
      zinc: 0.2,
    },
    safetyLevel: 'safe',
    alternativeNames: {
      en: ['green cabbage', 'white cabbage'],
      ne: ['हरियो बन्दाकोबी', 'सेतो बन्दाकोबी']
    },
  },
  {
    id: 'cauliflower',
    nameEn: 'Cauliflower',
    nameNe: 'काउली',
    category: 'vegetables',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1568584711075-3d021a7c3ca3?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 25,
      protein: 1.9,
      carbohydrates: 5,
      fat: 0.3,
      fiber: 2,
      potassium: 299,
      phosphorus: 44,
      sodium: 30,
      calcium: 22,
      fluid: 92,
      iron: 0.4,
      zinc: 0.3,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'cucumber',
    nameEn: 'Cucumber',
    nameNe: 'काँक्रो',
    category: 'vegetables',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1449300079323-02e209d9d3a6?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 16,
      protein: 0.7,
      carbohydrates: 4,
      fat: 0.1,
      fiber: 1.5,
      potassium: 147,
      phosphorus: 24,
      sodium: 2,
      calcium: 16,
      fluid: 95,
      iron: 0.3,
      zinc: 0.2,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'lettuce',
    nameEn: 'Lettuce',
    nameNe: 'सलाद पात',
    category: 'vegetables',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1622206151226-18ca2c9ab4a1?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 15,
      protein: 1.4,
      carbohydrates: 2.9,
      fat: 0.2,
      fiber: 1.3,
      potassium: 194,
      phosphorus: 29,
      sodium: 28,
      calcium: 36,
      fluid: 95,
      iron: 0.9,
      zinc: 0.2,
    },
    safetyLevel: 'safe',
  },

  // VEGETABLES - MEDIUM POTASSIUM (CAUTION)
  {
    id: 'carrot',
    nameEn: 'Carrot',
    nameNe: 'गाजर',
    category: 'vegetables',
    subcategory: 'medium-potassium',
    image: 'https://images.unsplash.com/photo-1445282768818-728615cc910a?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 41,
      protein: 0.9,
      carbohydrates: 9.6,
      fat: 0.2,
      fiber: 2.8,
      potassium: 320,
      phosphorus: 35,
      sodium: 69,
      calcium: 33,
      fluid: 88,
      iron: 0.3,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'green-beans',
    nameEn: 'Green Beans',
    nameNe: 'हरियो सिमी',
    category: 'vegetables',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/6m200d57xrs1j9flws1cb',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 31,
      protein: 1.8,
      carbohydrates: 7,
      fat: 0.2,
      fiber: 2.7,
      potassium: 211,
      phosphorus: 38,
      sodium: 6,
      calcium: 37,
      fluid: 90,
      iron: 1,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'corn',
    nameEn: 'Sweet Corn',
    nameNe: 'मकै',
    category: 'vegetables',
    subcategory: 'medium-potassium',
    image: 'https://images.unsplash.com/photo-1551754655-cd27e38d2076?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 86,
      protein: 3.3,
      carbohydrates: 19,
      fat: 1.4,
      fiber: 2.4,
      potassium: 270,
      phosphorus: 89,
      sodium: 15,
      calcium: 2,
      fluid: 76,
      iron: 0.5,
      zinc: 0.5,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'eggplant',
    nameEn: 'Eggplant',
    nameNe: 'भन्टा',
    category: 'vegetables',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/oaiws4yiq52h26xyw0ecz',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 25,
      protein: 1,
      carbohydrates: 6,
      fat: 0.2,
      fiber: 3,
      potassium: 229,
      phosphorus: 24,
      sodium: 2,
      calcium: 9,
      fluid: 92,
      iron: 0.2,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
    alternativeNames: {
      en: ['aubergine', 'brinjal'],
      ne: ['बैंगन']
    },
  },

  // VEGETABLES - HIGH POTASSIUM (AVOID/RESTRICT)
  {
    id: 'potato',
    nameEn: 'Potato',
    nameNe: 'आलु',
    category: 'vegetables',
    subcategory: 'high-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/u9dm630tp675tf317cctz',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 77,
      protein: 2,
      carbohydrates: 17,
      fat: 0.1,
      fiber: 2.2,
      potassium: 421,
      phosphorus: 57,
      sodium: 6,
      calcium: 12,
      fluid: 79,
      iron: 0.8,
      zinc: 0.3,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Double boil potatoes to reduce potassium by 50%', ne: 'पोटासियम ५०% कम गर्न आलुलाई दुई पटक उमाल्नुहोस्' },
      { en: 'Cut into small pieces and soak for 4+ hours', ne: 'सानो टुक्रामा काटेर ४ घण्टा भन्दा बढी भिजाउनुहोस्' },
      { en: 'Use large amounts of water when boiling', ne: 'उमाल्दा धेरै पानी प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high potassium - avoid or use leaching methods', ne: 'धेरै उच्च पोटासियम - बच्नुहोस् वा लीचिङ विधि प्रयोग गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 50,
      notes: 'Only if properly leached'
    },
    nonDialysisDay: {
      maxPortion: 25,
      notes: 'Avoid if possible'
    },
  },
  {
    id: 'spinach',
    nameEn: 'Spinach',
    nameNe: 'पालुङ्गो',
    category: 'vegetables',
    subcategory: 'high-potassium',
    image: 'https://images.unsplash.com/photo-1576045057995-568f588f82fb?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 23,
      protein: 2.9,
      carbohydrates: 3.6,
      fat: 0.4,
      fiber: 2.2,
      potassium: 558,
      phosphorus: 49,
      sodium: 79,
      calcium: 99,
      fluid: 91,
      iron: 2.7,
      zinc: 0.5,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Blanch and drain to reduce potassium by 30%', ne: 'पोटासियम ३०% कम गर्न उमालेर पानी फाल्नुहोस्' },
      { en: 'Use small amounts as seasoning only', ne: 'मसलाको रूपमा मात्र थोरै प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high potassium - severely restrict', ne: 'धेरै उच्च पोटासियम - कडा रूपमा सीमित गर्नुहोस्' },
    ],
  },
  {
    id: 'tomato',
    nameEn: 'Tomato',
    nameNe: 'गोलभेडा',
    category: 'vegetables',
    subcategory: 'high-potassium',
    image: 'https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 18,
      protein: 0.9,
      carbohydrates: 3.9,
      fat: 0.2,
      fiber: 1.2,
      potassium: 237,
      phosphorus: 24,
      sodium: 5,
      calcium: 10,
      fluid: 94,
      iron: 0.3,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'Moderate potassium - limit portions', ne: 'मध्यम पोटासियम - मात्रा सीमित गर्नुहोस्' },
    ],
  },

  // FRUITS - LOW POTASSIUM (SAFE)
  {
    id: 'apple',
    nameEn: 'Apple',
    nameNe: 'स्याउ',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1584306670957-acf935f5033c?w=200',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 182,
    nutrients: {
      calories: 95,
      protein: 0.5,
      carbohydrates: 25,
      fat: 0.3,
      fiber: 4.4,
      potassium: 195,
      phosphorus: 20,
      sodium: 2,
      calcium: 11,
      fluid: 155,
      iron: 0.2,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'grapes',
    nameEn: 'Grapes',
    nameNe: 'अंगुर',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1537640538966-79f369143f8f?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 62,
      protein: 0.6,
      carbohydrates: 16,
      fat: 0.2,
      fiber: 0.9,
      potassium: 191,
      phosphorus: 20,
      sodium: 2,
      calcium: 10,
      fluid: 81,
      iron: 0.4,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'pear',
    nameEn: 'Pear',
    nameNe: 'नाशपाती',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/n639qgzpxm33b2dq5oedy',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 178,
    nutrients: {
      calories: 101,
      protein: 0.6,
      carbohydrates: 27,
      fat: 0.2,
      fiber: 5.5,
      potassium: 206,
      phosphorus: 21,
      sodium: 2,
      calcium: 16,
      fluid: 151,
      iron: 0.3,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'berries-mixed',
    nameEn: 'Mixed Berries',
    nameNe: 'मिश्रित बेरी',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://images.unsplash.com/photo-1498557850523-fd3d118b962e?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 57,
      protein: 0.7,
      carbohydrates: 14,
      fat: 0.3,
      fiber: 2.4,
      potassium: 77,
      phosphorus: 12,
      sodium: 1,
      calcium: 16,
      fluid: 84,
      iron: 0.6,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
  },

  // FRUITS - MEDIUM POTASSIUM (CAUTION)
  {
    id: 'pineapple',
    nameEn: 'Pineapple',
    nameNe: 'भुइँकटहर',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://images.unsplash.com/photo-1550258987-190a2d41a8ba?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 50,
      protein: 0.5,
      carbohydrates: 13,
      fat: 0.1,
      fiber: 1.4,
      potassium: 109,
      phosphorus: 8,
      sodium: 1,
      calcium: 13,
      fluid: 86,
      iron: 0.3,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'peach',
    nameEn: 'Peach',
    nameNe: 'आरु',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/yq8rk91mc2apddncwggfn',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 150,
    nutrients: {
      calories: 58,
      protein: 1.4,
      carbohydrates: 14,
      fat: 0.4,
      fiber: 2.3,
      potassium: 285,
      phosphorus: 30,
      sodium: 0,
      calcium: 9,
      fluid: 133,
      iron: 0.4,
      zinc: 0.3,
    },
    safetyLevel: 'caution',
  },

  // FRUITS - HIGH POTASSIUM (AVOID/RESTRICT)
  {
    id: 'banana',
    nameEn: 'Banana',
    nameNe: 'केरा',
    category: 'fruits',
    subcategory: 'high-potassium',
    image: 'https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=200',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 118,
    nutrients: {
      calories: 105,
      protein: 1.3,
      carbohydrates: 27,
      fat: 0.4,
      fiber: 3.1,
      potassium: 422,
      phosphorus: 26,
      sodium: 1,
      calcium: 6,
      fluid: 88,
      iron: 0.3,
      zinc: 0.2,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'High in potassium - limit to half banana', ne: 'उच्च पोटासियम - आधा केरा मात्र खानुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high potassium - avoid or severely limit', ne: 'धेरै उच्च पोटासियम - बच्नुहोस् वा कडा रूपमा सीमित गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 0.5,
      notes: 'Half banana maximum'
    },
    nonDialysisDay: {
      maxPortion: 0.25,
      notes: 'Quarter banana maximum'
    },
  },
  {
    id: 'orange',
    nameEn: 'Orange',
    nameNe: 'सुन्तला',
    category: 'fruits',
    subcategory: 'high-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/npkpzolatoft5zr9251oa',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्य���',
    weightGrams: 154,
    nutrients: {
      calories: 62,
      protein: 1.2,
      carbohydrates: 15,
      fat: 0.2,
      fiber: 3.1,
      potassium: 237,
      phosphorus: 18,
      sodium: 0,
      calcium: 52,
      fluid: 131,
      iron: 0.1,
      zinc: 0.1,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'melon',
    nameEn: 'Cantaloupe Melon',
    nameNe: 'खरबुजा',
    category: 'fruits',
    subcategory: 'high-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/x6jg8brrvsfryk1ieeuyy',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 34,
      protein: 0.8,
      carbohydrates: 8,
      fat: 0.2,
      fiber: 0.9,
      potassium: 267,
      phosphorus: 15,
      sodium: 16,
      calcium: 9,
      fluid: 90,
      iron: 0.2,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'avocado',
    nameEn: 'Avocado',
    nameNe: 'एभोकाडो',
    category: 'fruits',
    subcategory: 'high-potassium',
    image: 'https://images.unsplash.com/photo-1523049673857-eb18f1d7b578?w=200',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 150,
    nutrients: {
      calories: 234,
      protein: 2.9,
      carbohydrates: 12,
      fat: 21,
      fiber: 10,
      potassium: 690,
      phosphorus: 54,
      sodium: 10,
      calcium: 18,
      fluid: 110,
      iron: 0.8,
      zinc: 0.9,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Very high potassium - avoid or use tiny portions only', ne: 'धेरै उच्च पोटासियम - बच्नुहोस् वा सानो मात्रा मात्र प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Extremely high potassium - not recommended for CKD patients', ne: 'अत्यधिक उच्च पोटासियम - CKD बिरामीहरूका लागि सिफारिस गरिँदैन' },
    ],
    dialysisDay: {
      maxPortion: 0.1,
      notes: 'Tiny portion only if craving'
    },
    nonDialysisDay: {
      maxPortion: 0.05,
      notes: 'Avoid completely'
    },
  },
  {
    id: 'guava',
    nameEn: 'Guava',
    nameNe: 'अम्बा',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/erq4deiz3d9yyab3yykfs',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 165,
    nutrients: {
      calories: 112,
      protein: 4.2,
      carbohydrates: 23,
      fat: 1.6,
      fiber: 9,
      potassium: 688,
      phosphorus: 66,
      sodium: 3,
      calcium: 30,
      fluid: 142,
      iron: 0.4,
      zinc: 0.4,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'High potassium - limit to small portions', ne: 'उच्च पोटासियम - सानो मात्रामा सीमित गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High potassium and fiber - restrict portions', ne: 'उच्च पोटासियम र फाइबर - मात्रा सीमित गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 0.25,
      notes: 'Quarter fruit maximum'
    },
    nonDialysisDay: {
      maxPortion: 0.125,
      notes: 'Very small portions only'
    },
  },
  {
    id: 'jackfruit',
    nameEn: 'Jackfruit',
    nameNe: 'कटहर',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/05kyyuaqagimi7r0ieijc',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 95,
      protein: 1.7,
      carbohydrates: 23,
      fat: 0.6,
      fiber: 1.5,
      potassium: 448,
      phosphorus: 21,
      sodium: 2,
      calcium: 24,
      fluid: 73,
      iron: 0.2,
      zinc: 0.1,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Moderate potassium - limit portions', ne: 'मध्यम पोटासियम - मात्रा सीमित गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Moderate potassium content - use in small amounts', ne: 'मध्यम पोटासियम सामग्री - सानो मात्रामा प्रयोग गर्नुहोस्' },
    ],
  },
  {
    id: 'lemon',
    nameEn: 'Lemon',
    nameNe: 'कागती',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/l8o0ku56b47w69d3y2l42',
    defaultPortion: 1,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 60,
    nutrients: {
      calories: 10,
      protein: 0.4,
      carbohydrates: 3.2,
      fat: 0.1,
      fiber: 0.9,
      potassium: 48,
      phosphorus: 9,
      sodium: 1,
      calcium: 15,
      fluid: 53,
      iron: 0.4,
      zinc: 0.04,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Excellent for flavoring - very low potassium', ne: 'स्वाद बढाउनको लागि उत्कृष्ट - धेरै कम पोटासियम' },
      { en: 'Use juice for seasoning without adding salt', ne: 'नुन नथपी मसलाको लागि रस प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very safe option - adds flavor without minerals', ne: 'धेरै सुरक्षित विकल्प - खनिज बिना स्वाद थप्छ' },
    ],
  },
  {
    id: 'lychee',
    nameEn: 'Lychee',
    nameNe: 'लिची',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/67u9r1l49rsi8to8jzukf',
    defaultPortion: 10,
    unitEn: 'pieces',
    unitNe: 'पिस',
    weightGrams: 100,
    nutrients: {
      calories: 66,
      protein: 0.8,
      carbohydrates: 17,
      fat: 0.4,
      fiber: 1.3,
      potassium: 171,
      phosphorus: 31,
      sodium: 1,
      calcium: 5,
      fluid: 82,
      iron: 0.3,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Good low-potassium fruit option', ne: 'राम्रो कम पोटासियम फलफूलको विकल्प' },
    ],
    medicalNotes: [
      { en: 'Safe fruit choice with moderate potassium', ne: 'मध्यम पोटासियम भएको सुरक्षित फलफूलको छनोट' },
    ],
  },
  {
    id: 'mango-ripe',
    nameEn: 'Ripe Mango',
    nameNe: 'पाकेको आँप',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/qv0g538156unrfacpu5el',
    defaultPortion: 1,
    unitEn: 'cup sliced',
    unitNe: 'कप काटेको',
    weightGrams: 165,
    nutrients: {
      calories: 99,
      protein: 1.4,
      carbohydrates: 25,
      fat: 0.6,
      fiber: 2.6,
      potassium: 325,
      phosphorus: 18,
      sodium: 2,
      calcium: 18,
      fluid: 138,
      iron: 0.3,
      zinc: 0.1,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Moderate potassium - limit to small portions', ne: 'मध्यम पोटासियम - सानो मात्रामा सीमित गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Popular fruit with moderate potassium - portion control needed', ne: 'मध्यम पोटासियम भएको लोकप्रिय फल - मात्रा नियन्त्रण आवश्यक' },
    ],
  },
  {
    id: 'papaya-ripe',
    nameEn: 'Ripe Papaya',
    nameNe: 'पाकेको मेवा',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/vevu98fnosqzv2b6iwuo7',
    defaultPortion: 1,
    unitEn: 'cup cubed',
    unitNe: 'कप काटेको',
    weightGrams: 140,
    nutrients: {
      calories: 55,
      protein: 0.9,
      carbohydrates: 14,
      fat: 0.2,
      fiber: 2.5,
      potassium: 360,
      phosphorus: 15,
      sodium: 4,
      calcium: 24,
      fluid: 125,
      iron: 0.4,
      zinc: 0.1,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Moderate potassium - limit portions', ne: 'मध्यम पोटासियम - मात्रा सीमित गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Good source of vitamins with moderate potassium', ne: 'मध्यम पोटासियम सहित भिटामिनको राम्रो स्रोत' },
    ],
  },
  {
    id: 'pomegranate',
    nameEn: 'Pomegranate',
    nameNe: 'दाडिम',
    category: 'fruits',
    subcategory: 'medium-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/gdjlrqxdi34jb3d03rq1j',
    defaultPortion: 0.5,
    unitEn: 'cup seeds',
    unitNe: 'कप दाना',
    weightGrams: 87,
    nutrients: {
      calories: 72,
      protein: 1.5,
      carbohydrates: 16,
      fat: 1,
      fiber: 3.5,
      potassium: 205,
      phosphorus: 28,
      sodium: 3,
      calcium: 9,
      fluid: 69,
      iron: 0.3,
      zinc: 0.3,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Moderate potassium - small portions recommended', ne: 'मध्यम पोटासियम - सानो मात्रा सिफारिस गरिन्छ' },
    ],
    medicalNotes: [
      { en: 'Antioxidant-rich fruit with moderate potassium', ne: 'मध्यम पोटासियम सहित एन्टिअक्सिडेन्ट युक्त फल' },
    ],
  },
  {
    id: 'pani-amala',
    nameEn: 'Pani Amala (Water Apple)',
    nameNe: 'पानी आमला',
    category: 'fruits',
    subcategory: 'low-potassium',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/p5tuxickbu39h1ipd8a4e',
    defaultPortion: 2,
    unitEn: 'medium',
    unitNe: 'मध्यम',
    weightGrams: 100,
    nutrients: {
      calories: 25,
      protein: 0.6,
      carbohydrates: 5.7,
      fat: 0.3,
      fiber: 0.9,
      potassium: 123,
      phosphorus: 8,
      sodium: 0,
      calcium: 29,
      fluid: 93,
      iron: 0.1,
      zinc: 0.06,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Very low potassium - safe fruit option', ne: 'धेरै कम पोटासियम - सुरक्षित फलफूलको विकल्प' },
      { en: 'High water content - good for hydration', ne: 'उच्च पानी सामग्री - हाइड्रेसनको लागि राम्रो' },
    ],
    medicalNotes: [
      { en: 'Excellent low-potassium fruit with high water content', ne: 'उच्च पानी सामग्री सहित उत्कृष्ट कम पोटासियम फल' },
    ],
    alternativeNames: {
      en: ['water apple', 'rose apple', 'bell fruit'],
      ne: ['जाम्बु', 'पानी जाम्बु']
    },
  },

  // PROTEIN SOURCES - ANIMAL PROTEINS
  {
    id: 'chicken-breast',
    nameEn: 'Chicken Breast (Skinless)',
    nameNe: 'कुखुराको छाती',
    category: 'proteins',
    subcategory: 'animal-protein',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/7tzt8yw2yjtrtfhuhe6zb',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 165,
      protein: 31,
      carbohydrates: 0,
      fat: 3.6,
      fiber: 0,
      potassium: 256,
      phosphorus: 200,
      sodium: 74,
      calcium: 15,
      fluid: 65,
      iron: 0.9,
      zinc: 1,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'High quality protein - moderate phosphorus', ne: 'उच्च गुणस्तरको प्रोटिन - मध्यम फस्फोरस' },
    ],
  },
  {
    id: 'fish-salmon',
    nameEn: 'Salmon',
    nameNe: 'साल्मन माछा',
    category: 'proteins',
    subcategory: 'animal-protein',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/6pojrgrgwf2hccf5mbjjl',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 208,
      protein: 25,
      carbohydrates: 0,
      fat: 12,
      fiber: 0,
      potassium: 363,
      phosphorus: 200,
      sodium: 59,
      calcium: 9,
      fluid: 64,
      iron: 0.3,
      zinc: 0.4,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'High potassium and phosphorus - limit portions', ne: 'उच्च पोटासियम र फस्फोरस - मात्रा सीमित गर्नुहोस्' },
    ],
  },
  {
    id: 'egg-whole',
    nameEn: 'Whole Egg',
    nameNe: 'पूरै अण्डा',
    category: 'proteins',
    subcategory: 'animal-protein',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/4m195ybp22a4ek9anbt8a',
    defaultPortion: 1,
    unitEn: 'large',
    unitNe: 'ठूलो',
    weightGrams: 50,
    nutrients: {
      calories: 78,
      protein: 6.3,
      carbohydrates: 0.6,
      fat: 5.3,
      fiber: 0,
      potassium: 69,
      phosphorus: 99,
      sodium: 62,
      calcium: 28,
      fluid: 37,
      iron: 0.9,
      zinc: 0.6,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'egg-white',
    nameEn: 'Egg White',
    nameNe: 'अण्डाको सेतो भाग',
    category: 'proteins',
    subcategory: 'renal-specific',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/9sumptj0lvz7n5305oj2z',
    defaultPortion: 1,
    unitEn: 'large',
    unitNe: 'ठूलो',
    weightGrams: 33,
    nutrients: {
      calories: 17,
      protein: 3.6,
      carbohydrates: 0.2,
      fat: 0.1,
      fiber: 0,
      potassium: 54,
      phosphorus: 5,
      sodium: 55,
      calcium: 2,
      fluid: 29,
      iron: 0,
      zinc: 0,
    },
    safetyLevel: 'safe',
    medicalNotes: [
      { en: 'Excellent for CKD - high protein, low phosphorus', ne: 'CKD को लागि उत्कृष्ट - उच्च प्रोटिन, कम फस्फोरस' },
    ],
  },

  // LEGUMES & PULSES
  {
    id: 'dal-masoor',
    nameEn: 'Red Lentils (Masoor Dal)',
    nameNe: 'मसुर दाल',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/0m3hbjoohqn1mxpqaluwl',
    defaultPortion: 1,
    unitEn: 'bowl',
    unitNe: 'कचौरा',
    weightGrams: 200,
    nutrients: {
      calories: 230,
      protein: 18,
      carbohydrates: 40,
      fat: 0.8,
      fiber: 8,
      potassium: 731,
      phosphorus: 356,
      sodium: 4,
      calcium: 37,
      fluid: 200,
      iron: 6.6,
      zinc: 2.5,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Soak lentils overnight and discard water', ne: 'दाल रातभर भिजाउनुहोस् र पानी फाल्नुहोस्' },
      { en: 'Use less dal, more water for thinner consistency', ne: 'कम दाल, धेरै पानी प्रयोग गर्नुहोस्' },
      { en: 'Boil in excess water and drain to reduce minerals', ne: 'खनिज कम गर्न धेरै पानीमा उमालेर पानी फाल्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high potassium and phosphorus - severely limit', ne: 'धेरै उच्च पोटासियम र फस्फोरस - कडा रूपमा सीमित गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 0.25,
      notes: 'Quarter bowl maximum, well-soaked and drained'
    },
    nonDialysisDay: {
      maxPortion: 0.125,
      notes: 'Very small portions only'
    },
  },
  {
    id: 'dal-moong',
    nameEn: 'Green Gram (Moong Dal)',
    nameNe: 'मुंग दाल',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://images.unsplash.com/photo-1574484284002-952d92456975?w=200',
    defaultPortion: 1,
    unitEn: 'bowl',
    unitNe: 'कचौरा',
    weightGrams: 200,
    nutrients: {
      calories: 212,
      protein: 14,
      carbohydrates: 39,
      fat: 0.8,
      fiber: 15,
      potassium: 537,
      phosphorus: 267,
      sodium: 15,
      calcium: 132,
      fluid: 180,
      iron: 2.8,
      zinc: 1.7,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Soak overnight and use leaching method', ne: 'रातभर भिजाएर लीचिङ विधि प्रयोग गर्नुहोस्' },
    ],
  },
  {
    id: 'dal-chana',
    nameEn: 'Chickpeas (Chana Dal)',
    nameNe: 'चना दाल',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/65eh1ec2slafgm6t1c3ng',
    defaultPortion: 1,
    unitEn: 'bowl',
    unitNe: 'कचौरा',
    weightGrams: 200,
    nutrients: {
      calories: 269,
      protein: 20,
      carbohydrates: 45,
      fat: 4.3,
      fiber: 12,
      potassium: 875,
      phosphorus: 366,
      sodium: 24,
      calcium: 105,
      fluid: 160,
      iron: 4.3,
      zinc: 2.5,
    },
    safetyLevel: 'avoid',
    medicalNotes: [
      { en: 'Extremely high potassium and phosphorus - avoid', ne: 'अत्यधिक उच्च पोटासियम र फस्फोरस - बच्नुहोस्' },
    ],
  },

  // DAIRY & ALTERNATIVES
  {
    id: 'milk-whole',
    nameEn: 'Whole Milk',
    nameNe: 'पूरै दूध',
    category: 'dairy',
    subcategory: 'regular-dairy',
    image: 'https://images.unsplash.com/photo-1550583724-b2692b85b150?w=200',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 244,
    volumeMl: 240,
    nutrients: {
      calories: 149,
      protein: 8,
      carbohydrates: 12,
      fat: 8,
      fiber: 0,
      potassium: 322,
      phosphorus: 222,
      sodium: 105,
      calcium: 276,
      fluid: 215,
      iron: 0.1,
      zinc: 0.9,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'High phosphorus - limit to small amounts', ne: 'उच्च फस्फोरस - थोरै मात्रामा सीमित गर्नुहोस्' },
    ],
  },
  {
    id: 'yogurt-plain',
    nameEn: 'Plain Yogurt',
    nameNe: 'दही',
    category: 'dairy',
    subcategory: 'regular-dairy',
    image: 'https://images.unsplash.com/photo-1571212515416-fef01fc43637?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 59,
      protein: 10,
      carbohydrates: 3.6,
      fat: 0.4,
      fiber: 0,
      potassium: 141,
      phosphorus: 135,
      sodium: 36,
      calcium: 110,
      fluid: 85,
      iron: 0.1,
      zinc: 0.6,
    },
    safetyLevel: 'caution',
  },
  {
    id: 'cheese-cottage',
    nameEn: 'Cottage Cheese',
    nameNe: 'कटेज चीज',
    category: 'dairy',
    subcategory: 'portion-controlled',
    image: 'https://images.unsplash.com/photo-1628088062854-d1870b4553da?w=200',
    defaultPortion: 50,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 50,
    nutrients: {
      calories: 98,
      protein: 11,
      carbohydrates: 3.4,
      fat: 4.3,
      fiber: 0,
      potassium: 104,
      phosphorus: 159,
      sodium: 364,
      calcium: 83,
      fluid: 40,
      iron: 0.1,
      zinc: 0.4,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'High sodium and phosphorus - small portions only', ne: 'उच्च सोडियम र फस्फोरस - सानो मात्रा मात्र' },
    ],
  },
  {
    id: 'almond-milk',
    nameEn: 'Almond Milk (Unsweetened)',
    nameNe: 'बदामको दूध',
    category: 'dairy',
    subcategory: 'low-phosphorus',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/l1m356j33hz1oqjjecjgq',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 240,
    volumeMl: 240,
    nutrients: {
      calories: 37,
      protein: 1.4,
      carbohydrates: 1.4,
      fat: 3.4,
      fiber: 0.5,
      potassium: 176,
      phosphorus: 24,
      sodium: 150,
      calcium: 451,
      fluid: 225,
      iron: 0.7,
      zinc: 0.1,
    },
    safetyLevel: 'safe',
    medicalNotes: [
      { en: 'Good dairy alternative - low phosphorus', ne: 'राम्रो दूधको विकल्प - कम फस्फोरस' },
    ],
  },

  // BEVERAGES
  {
    id: 'water',
    nameEn: 'Water',
    nameNe: 'पानी',
    category: 'beverages',
    subcategory: 'safe-options',
    image: 'https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=200',
    defaultPortion: 1,
    unitEn: 'glass',
    unitNe: 'गिलास',
    weightGrams: 250,
    volumeMl: 250,
    nutrients: {
      calories: 0,
      protein: 0,
      carbohydrates: 0,
      fat: 0,
      fiber: 0,
      potassium: 0,
      phosphorus: 0,
      sodium: 0,
      calcium: 0,
      fluid: 250,
      iron: 0,
      zinc: 0,
    },
    safetyLevel: 'safe',
    medicalNotes: [
      { en: 'Monitor total fluid intake as per dialysis prescription', ne: 'डायलिसिस प्रिस्क्रिप्शन अनुसार कुल तरल पदार्थको सेवन निगरानी गर्नुहोस्' },
    ],
  },
  {
    id: 'tea-black',
    nameEn: 'Black Tea',
    nameNe: 'कालो चिया',
    category: 'beverages',
    subcategory: 'safe-options',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/ey0af0c3ga0vdcob4103w',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 240,
    volumeMl: 240,
    nutrients: {
      calories: 2,
      protein: 0,
      carbohydrates: 0.7,
      fat: 0,
      fiber: 0,
      potassium: 88,
      phosphorus: 1,
      sodium: 7,
      calcium: 0,
      fluid: 240,
      iron: 0,
      zinc: 0,
    },
    safetyLevel: 'safe',
  },
  {
    id: 'tea-milk',
    nameEn: 'Milk Tea',
    nameNe: 'दूध चिया',
    category: 'beverages',
    subcategory: 'cultural-drinks',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/hfdh2xksccj9m7rvz17de',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 240,
    volumeMl: 240,
    nutrients: {
      calories: 80,
      protein: 2,
      carbohydrates: 8,
      fat: 3,
      fiber: 0,
      potassium: 150,
      phosphorus: 60,
      sodium: 50,
      calcium: 80,
      fluid: 240,
      iron: 0.1,
      zinc: 0.2,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'Contains milk - moderate phosphorus', ne: 'दूध समावेश - मध्यम फस्फोरस' },
    ],
  },
  {
    id: 'coffee',
    nameEn: 'Coffee (Black)',
    nameNe: 'कफी',
    category: 'beverages',
    subcategory: 'safe-options',
    image: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=200',
    defaultPortion: 1,
    unitEn: 'cup',
    unitNe: 'कप',
    weightGrams: 240,
    volumeMl: 240,
    nutrients: {
      calories: 2,
      protein: 0.3,
      carbohydrates: 0,
      fat: 0,
      fiber: 0,
      potassium: 116,
      phosphorus: 7,
      sodium: 5,
      calcium: 5,
      fluid: 240,
      iron: 0,
      zinc: 0,
    },
    safetyLevel: 'safe',
    medicalNotes: [
      { en: 'Limit to 2-3 cups per day', ne: 'दिनमा २-३ कप मात्र सीमित गर्नुहोस्' },
    ],
  },

  // TRADITIONAL NEPALI FOODS
  {
    id: 'buffalo-meat-grilled',
    nameEn: 'Traditional Grilled Buffalo Meat',
    nameNe: 'मसलासहित परम्परागत भुटेको भैंसीको मासु',
    category: 'traditional',
    subcategory: 'meat-dishes',
    image: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=200',
    defaultPortion: 50,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 50,
    nutrients: {
      calories: 205,
      protein: 24.5,
      carbohydrates: 0,
      fat: 12,
      fiber: 0,
      potassium: 385,
      phosphorus: 215,
      sodium: 185,
      calcium: 15,
      fluid: 30,
      iron: 3.2,
      zinc: 4.5,
    },
    safetyLevel: 'avoid',
    medicalNotes: [
      { en: 'Traditional grilled buffalo meat with spices - avoid due to high protein, potassium and sodium', ne: 'मसलासहित परम्परागत भुटेको भैंसीको मासु - उच्च प्रोटिन, पोटासियम र सोडियमको कारण नखानुहोस्' },
    ],
  },
  {
    id: 'dal-bhat-tarkari',
    nameEn: 'Traditional Nepali Meal (Dal-Bhat-Tarkari)',
    nameNe: 'परम्परागत नेपाली खाना जसमा दाल, भात, तरकारी र अचार समावेश छ',
    category: 'traditional',
    subcategory: 'complete-meals',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/b6tti4azgvckkadk11dyh',
    defaultPortion: 1,
    unitEn: 'set',
    unitNe: 'सेट',
    weightGrams: 400,
    nutrients: {
      calories: 450,
      protein: 18,
      carbohydrates: 65,
      fat: 12,
      fiber: 8,
      potassium: 850,
      phosphorus: 320,
      sodium: 680,
      calcium: 80,
      fluid: 200,
      iron: 4.5,
      zinc: 2.8,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Use low-salt preparation. Boil vegetables well. Limit dal portion. Avoid high-potassium vegetables.', ne: 'कम नुन प्रयोग गर्नुहोस्। तरकारी राम्रोसँग उमालेर खानुहोस्। दालको मात्रा कम गर्नुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Traditional Nepali meal consisting of lentil soup, steamed rice, curry vegetables, and pickle', ne: 'परम्परागत नेपाली खाना जसमा दाल, भात, तरकारी र अचार समावेश छ' },
    ],
  },
  {
    id: 'chowmein-nepali',
    nameEn: 'Nepali Style Chowmein',
    nameNe: 'नेपाली स्वादमा बनाइएको लोकप्रिय नुडल खाना',
    category: 'traditional',
    subcategory: 'noodle-dishes',
    image: 'https://images.unsplash.com/photo-1612929633738-8fe44f7ec841?w=200',
    defaultPortion: 1,
    unitEn: 'plate',
    unitNe: 'प्लेट',
    weightGrams: 300,
    nutrients: {
      calories: 520,
      protein: 25,
      carbohydrates: 58,
      fat: 18,
      fiber: 4,
      potassium: 420,
      phosphorus: 280,
      sodium: 1200,
      calcium: 45,
      fluid: 100,
      iron: 3.8,
      zinc: 2.2,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Use less soy sauce and salt. Boil noodles well. Add more vegetables, less meat.', ne: 'कम सोया सस र नुन प्रयोग गर्नुहोस्। नुडलस राम्रोसँग उमालेर बनाउनुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Popular Indo-Chinese noodle dish adapted to Nepali taste', ne: 'नेपाली स्वादमा बनाइएको लोकप्रिय नुडल खाना' },
    ],
  },
  {
    id: 'momo-steamed',
    nameEn: 'Steamed Momo',
    nameNe: 'तिब्बती शैलीको परम्परागत खाना, नेपालमा निकै लोकप्रिय',
    category: 'traditional',
    subcategory: 'main-dishes',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/m35jiyjucwvps2ynnuwnf',
    defaultPortion: 10,
    unitEn: 'pieces',
    unitNe: 'पिस',
    weightGrams: 150,
    nutrients: {
      calories: 380,
      protein: 16,
      carbohydrates: 42,
      fat: 15,
      fiber: 3,
      potassium: 350,
      phosphorus: 220,
      sodium: 950,
      calcium: 35,
      fluid: 150,
      iron: 2.8,
      zinc: 1.8,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Steam instead of fry. Use less salt in filling. Limit soup intake due to sodium.', ne: 'भुटेर नबनाएर बाफेर बनाउनुहोस्। कम नुन प्रयोग गर्नुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Traditional Tibetan-style steamed dumplings, very popular in Nepal', ne: 'तिब्बती शैलीको परम्परागत खाना, नेपालमा निकै लोकप्रिय' },
    ],
  },
  {
    id: 'chiura-tea-egg',
    nameEn: 'Chiura with Tea and Egg',
    nameNe: 'परम्परागत नेपाली नास्ता - चिउरा, चिया र उमालेको अण्डा',
    category: 'traditional',
    subcategory: 'breakfast',
    image: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=200',
    defaultPortion: 1,
    unitEn: 'set',
    unitNe: 'सेट',
    weightGrams: 200,
    nutrients: {
      calories: 320,
      protein: 12,
      carbohydrates: 45,
      fat: 8,
      fiber: 2,
      potassium: 280,
      phosphorus: 180,
      sodium: 420,
      calcium: 60,
      fluid: 200,
      iron: 2.2,
      zinc: 1.5,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Good breakfast option. Use minimal salt with chiura. Limit tea to 1 cup.', ne: 'राम्रो नास्ताको विकल्प। चिउरामा कम नुन प्रयोग गर्नुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Traditional Nepali breakfast with beaten rice, tea, and boiled egg', ne: 'परम्परागत नेपाली नास्ता - चिउरा, चिया र उमालेको अण्डा' },
    ],
  },
  {
    id: 'nepali-thali-complete',
    nameEn: 'Complete Nepali Thali',
    nameNe: 'पूर्ण नेपाली लञ्च - भात, दाल, तरकारी, मासुको तरकारी र अचार',
    category: 'traditional',
    subcategory: 'complete-meals',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/0h54dfe7pntgcr754mk8y',
    defaultPortion: 1,
    unitEn: 'thali',
    unitNe: 'थाली',
    weightGrams: 500,
    nutrients: {
      calories: 580,
      protein: 22,
      carbohydrates: 72,
      fat: 18,
      fiber: 10,
      potassium: 920,
      phosphorus: 380,
      sodium: 750,
      calcium: 95,
      fluid: 250,
      iron: 5.2,
      zinc: 3.8,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Choose low-potassium vegetables. Use minimal salt. Limit dal and meat portions.', ne: 'कम पोटासियम भएको तरकारी छान्नुहोस्। न्यूनतम नुन प्रयोग गर्नुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Complete Nepali lunch with rice, dal, vegetables, meat curry, and pickle', ne: 'पूर्ण नेपाली लञ्च - भात, दाल, तरकारी, मासुको तरकारी र अचार' },
    ],
  },
  {
    id: 'newari-feast',
    nameEn: 'Traditional Newari Feast',
    nameNe: 'परम्परागत नेवारी भोज जसमा विभिन्न प्रकारका खाना समावेश छ',
    category: 'traditional',
    subcategory: 'festival-foods',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/xynxin7ywkma3b183gnzf',
    defaultPortion: 1,
    unitEn: 'set',
    unitNe: 'सेट',
    weightGrams: 600,
    nutrients: {
      calories: 750,
      protein: 28,
      carbohydrates: 85,
      fat: 25,
      fiber: 12,
      potassium: 1200,
      phosphorus: 520,
      sodium: 1800,
      calcium: 120,
      fluid: 100,
      iron: 6.8,
      zinc: 4.5,
    },
    safetyLevel: 'avoid',
    medicalNotes: [
      { en: 'Very high in sodium and phosphorus. Not recommended for dialysis patients. Occasional small portions only.', ne: 'धेरै नुन र फस्फोरस छ। डायलाइसिसका बिरामीलाई सिफारिस गरिँदैन।' },
      { en: 'Traditional Newari feast with multiple dishes including buffalo meat, beaten rice, and fermented vegetables', ne: 'परम्परागत नेवारी भोज जसमा विभिन्न प्रकारका खाना समावेश छ' },
    ],
  },
  {
    id: 'gundruk',
    nameEn: 'Gundruk (Fermented Leafy Greens)',
    nameNe: 'गुन्द्रुक',
    category: 'traditional',
    subcategory: 'pickles-fermented',
    image: 'https://images.unsplash.com/photo-1576045057995-568f588f82fb?w=200',
    defaultPortion: 50,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 50,
    nutrients: {
      calories: 35,
      protein: 3.5,
      carbohydrates: 6,
      fat: 0.5,
      fiber: 4,
      potassium: 180,
      phosphorus: 45,
      sodium: 220,
      calcium: 150,
      fluid: 10,
      iron: 2.5,
      zinc: 0.8,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Rinse well before cooking to reduce sodium', ne: 'सोडियम कम गर्न पकाउनु अघि राम्रोसँग धुनुहोस्' },
    ],
  },
  {
    id: 'sel-roti',
    nameEn: 'Sel Roti',
    nameNe: 'परम्परागत नेपाली चक्राकार रोटी, चाडपर्वमा लोकप्रिय',
    category: 'traditional',
    subcategory: 'festival-foods',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/4c9jujt4l18l5ycf4ri6u',
    defaultPortion: 2,
    unitEn: 'pieces',
    unitNe: 'पिस',
    weightGrams: 120,
    nutrients: {
      calories: 280,
      protein: 6,
      carbohydrates: 42,
      fat: 10,
      fiber: 2,
      potassium: 150,
      phosphorus: 120,
      sodium: 180,
      calcium: 40,
      fluid: 200,
      iron: 2.4,
      zinc: 1.2,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Good snack option. Limit to 1-2 pieces. Use minimal sugar in tea.', ne: 'राम्रो खाजाको विकल्प। १-२ टुक्रा मात्र खानुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Traditional ring-shaped Nepali bread, popular during festivals', ne: 'परम्परागत नेपाली चक्राकार रोटी, चाडपर्वमा लोकप्रिय' },
    ],
  },
  {
    id: 'dhido-gundruk',
    nameEn: 'Dhido with Gundruk',
    nameNe: 'परम्परागत ग्रामीण नेपाली खाना - किण्वित साग र कोदोको ढिडो',
    category: 'traditional',
    subcategory: 'rural-foods',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/uyjwcdbg7s1oe4ru7hybi',
    defaultPortion: 1,
    unitEn: 'bowl',
    unitNe: 'कचौरा',
    weightGrams: 250,
    nutrients: {
      calories: 220,
      protein: 8,
      carbohydrates: 38,
      fat: 4,
      fiber: 6,
      potassium: 480,
      phosphorus: 140,
      sodium: 320,
      calcium: 85,
      fluid: 100,
      iron: 3.5,
      zinc: 1.8,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Boil gundruk well to reduce potassium. Use minimal salt. Good fiber source.', ne: 'गुन्द्रुकलाई राम्रोसँग उमालेर पोटासियम कम गर्नुहोस्।' },
    ],
    medicalNotes: [
      { en: 'Traditional rural Nepali meal with fermented leafy greens and finger millet porridge', ne: 'परम्परागत ग्रामीण नेपाली खाना - किण्वित साग र कोदोको ढिडो' },
    ],
  },
  {
    id: 'achar-mixed',
    nameEn: 'Mixed Pickle (Achar)',
    nameNe: 'मिश्रित अचार',
    category: 'traditional',
    subcategory: 'pickles-fermented',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/2c2n9v85z4338yvzrsxea',
    defaultPortion: 20,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 20,
    nutrients: {
      calories: 25,
      protein: 1,
      carbohydrates: 4,
      fat: 1,
      fiber: 1.5,
      potassium: 80,
      phosphorus: 15,
      sodium: 300,
      calcium: 20,
      fluid: 5,
      iron: 0.5,
      zinc: 0.1,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'Very high sodium - use sparingly as condiment', ne: 'धेरै उच्च सोडियम - मसलाको रूपमा थोरै प्रयोग गर्नुहोस्' },
    ],
  },
  {
    id: 'bhuteko-makai',
    nameEn: 'Bhuteko Makai (Popped Corn)',
    nameNe: 'भुटेको मकै',
    category: 'snacks',
    subcategory: 'traditional-snacks',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/nzse5o7qd3qujib26glf6',
    defaultPortion: 30,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 30,
    nutrients: {
      calories: 110,
      protein: 3.3,
      carbohydrates: 22,
      fat: 1.2,
      fiber: 4.1,
      potassium: 93,
      phosphorus: 98,
      sodium: 2,
      calcium: 1,
      fluid: 3,
      iron: 0.9,
      zinc: 0.9,
    },
    safetyLevel: 'safe',
    preparationTips: [
      { en: 'Air-popped without oil is healthiest option', ne: 'तेल बिना हावामा फुलाएको सबैभन्दा स्वस्थ विकल्प हो' },
      { en: 'Avoid adding salt or butter', ne: 'नुन वा मक्खन नथप्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Good low-sodium snack option with fiber', ne: 'फाइबर सहितको राम्रो कम सोडियम खाजा' },
    ],
    alternativeNames: {
      en: ['popcorn', 'puffed corn', 'popped maize'],
      ne: ['पप कर्न', 'फुलेको मकै']
    },
  },
  {
    id: 'black-gram',
    nameEn: 'Black Gram (Urad Dal)',
    nameNe: 'कालो मास',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/hfi45d5svb32ejyocb69o',
    defaultPortion: 1,
    unitEn: 'bowl',
    unitNe: 'कचौरा',
    weightGrams: 200,
    nutrients: {
      calories: 341,
      protein: 25,
      carbohydrates: 58,
      fat: 1.6,
      fiber: 18,
      potassium: 983,
      phosphorus: 385,
      sodium: 38,
      calcium: 138,
      fluid: 160,
      iron: 7.6,
      zinc: 3.4,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Soak overnight and use leaching method to reduce minerals', ne: 'खनिज कम गर्न रातभर भिजाएर लीचिङ विधि प्रयोग गर्नुहोस्' },
      { en: 'Use very small portions due to high potassium and phosphorus', ne: 'उच्च पोटासियम र फस्फोरसको कारण धेरै सानो मात्रा प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Extremely high potassium and phosphorus - avoid or severely limit', ne: 'अत्यधिक उच्च पोटासियम र फस्फोरस - बच्नुहोस् वा कडा रूपमा सीमित गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 0.125,
      notes: 'Very small portions only, well-soaked and drained'
    },
    nonDialysisDay: {
      maxPortion: 0.0625,
      notes: 'Avoid if possible'
    },
    alternativeNames: {
      en: ['urad dal', 'black lentil', 'vigna mungo'],
      ne: ['उरद दाल', 'कालो दाल']
    },
  },
  {
    id: 'black-beans',
    nameEn: 'Black Beans',
    nameNe: 'कालो सिमी',
    category: 'legumes',
    subcategory: 'beans',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/u8qkwmso09c9rovw66tmr',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 172,
    nutrients: {
      calories: 227,
      protein: 15,
      carbohydrates: 41,
      fat: 0.9,
      fiber: 15,
      potassium: 611,
      phosphorus: 241,
      sodium: 2,
      calcium: 46,
      fluid: 120,
      iron: 3.6,
      zinc: 1.9,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Soak overnight and boil in excess water, drain to reduce potassium', ne: 'पोटासियम कम गर्न रातभर भिजाएर धेरै पानीमा उमालेर पानी फाल्नुहोस्' },
      { en: 'Use small portions as side dish only', ne: 'साइड डिशको रूपमा मात्र सानो मात्रा प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high potassium and phosphorus - severely restrict portions', ne: 'धेरै उच्च पोटासियम र फस्फोरस - मात्रा कडा रूपमा सीमित गर्नुहोस्' },
    ],
    alternativeNames: {
      en: ['turtle beans', 'frijoles negros'],
      ne: ['कालो राजमा']
    },
  },
  {
    id: 'bhote-simi',
    nameEn: 'Bhote Simi (Lima Beans)',
    nameNe: 'भोटे सिमी',
    category: 'legumes',
    subcategory: 'beans',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/w31mw1bxm6r3hd1ln7zsh',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 170,
    nutrients: {
      calories: 216,
      protein: 15,
      carbohydrates: 39,
      fat: 0.7,
      fiber: 13,
      potassium: 955,
      phosphorus: 209,
      sodium: 4,
      calcium: 32,
      fluid: 115,
      iron: 4.5,
      zinc: 1.8,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Traditional Himalayan bean - soak well and use leaching method', ne: 'परम्परागत हिमालयन सिमी - राम्रोसँग भिजाएर लीचिङ विधि प्रयोग गर्नुहोस्' },
      { en: 'Very high potassium - use tiny portions only', ne: 'धेरै उच्च पोटासियम - सानो मात्रा मात्र प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Extremely high potassium - not recommended for CKD patients', ne: 'अत्यधिक उच्च पोटासियम - CKD बिरामीहरूका लागि सिफारिस गरिँदैन' },
    ],
    alternativeNames: {
      en: ['lima beans', 'butter beans', 'himalayan beans'],
      ne: ['लिमा सिमी', 'हिमालयन सिमी']
    },
  },
  {
    id: 'horsegram-black',
    nameEn: 'Black Horsegram',
    nameNe: 'कालो गहत',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/hqkhqxaxabmmxtgaexax6',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 180,
    nutrients: {
      calories: 321,
      protein: 22,
      carbohydrates: 57,
      fat: 0.6,
      fiber: 5,
      potassium: 1395,
      phosphorus: 311,
      sodium: 15,
      calcium: 287,
      fluid: 125,
      iron: 6.8,
      zinc: 1.5,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Extremely high potassium - avoid completely or use minimal amounts', ne: 'अत्यधिक उच्च पोटासियम - पूर्ण रूपमा बच्नुहोस् वा न्यूनतम मात्रा प्रयोग गर्नुहोस्' },
      { en: 'If used, soak for 24 hours and boil multiple times', ne: 'प्रयोग गर्नुपर्दा २४ घण्टा भिजाएर धेरै पटक उमाल्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Highest potassium among legumes - strictly avoid for kidney patients', ne: 'दालहरूमध्ये सबैभन्दा उच्च पोटासियम - मृगौला रोगीहरूले कडा रूपमा बच्नुपर्छ' },
    ],
    alternativeNames: {
      en: ['kulthi dal', 'horse gram', 'dolichos biflorus'],
      ne: ['कुल्थी दाल', 'गहत दाल']
    },
  },
  {
    id: 'khesari-dal',
    nameEn: 'Khesari Dal (Grass Pea)',
    nameNe: 'खेसारी दाल',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/owlvkk8nl45ubtzakzwkv',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 190,
    nutrients: {
      calories: 338,
      protein: 28,
      carbohydrates: 60,
      fat: 0.6,
      fiber: 9,
      potassium: 730,
      phosphorus: 281,
      sodium: 26,
      calcium: 176,
      fluid: 140,
      iron: 1.8,
      zinc: 1.2,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Traditional dal but high in potassium - use sparingly', ne: 'परम्परागत दाल तर उच्च पोटासियम - थोरै प्रयोग गर्नुहोस्' },
      { en: 'Soak overnight and use excess water method', ne: 'रातभर भिजाएर धेरै पानी विधि प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High potassium and phosphorus - limit portions significantly', ne: 'उच्च पोटासियम र फस्फोरस - मात्रा उल्लेखनीय रूपमा सीमित गर्नुहोस्' },
      { en: 'Contains neurotoxin ODAP - consume in moderation even for healthy individuals', ne: 'न्यूरोटक्सिन ODAP समावेश - स्वस्थ व्यक्तिहरूले पनि सीमित मात्रामा सेवन गर्नुहोस्' },
    ],
    alternativeNames: {
      en: ['grass pea', 'chickling pea', 'lathyrus sativus'],
      ne: ['तेउरी दाल']
    },
  },
  {
    id: 'peas-dry',
    nameEn: 'Dried Peas (Split)',
    nameNe: 'सुकेको केराउ',
    category: 'legumes',
    subcategory: 'dal',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/fmop74rko1s4oarmk4e75',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 196,
    nutrients: {
      calories: 231,
      protein: 16,
      carbohydrates: 41,
      fat: 0.8,
      fiber: 16,
      potassium: 710,
      phosphorus: 194,
      sodium: 4,
      calcium: 27,
      fluid: 140,
      iron: 2.5,
      zinc: 1.9,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Soak well and use leaching method to reduce potassium', ne: 'पोटासियम कम गर्न राम्रोसँग भिजाएर लीचिङ विधि प्रयोग गर्नुहोस्' },
      { en: 'High fiber content - good for digestion but limit portions', ne: 'उच्च फाइबर सामग्री - पाचनको लागि राम्रो तर मात्रा सीमित गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High potassium and phosphorus - restrict portions for kidney patients', ne: 'उच्च पोटासियम र फस्फोरस - मृगौला रोगीहरूका लागि मात्रा सीमित गर्नुहोस्' },
    ],
    alternativeNames: {
      en: ['split peas', 'field peas', 'pisum sativum'],
      ne: ['केराउ दाल', 'सुकेको मटर']
    },
  },
  {
    id: 'rajmah',
    nameEn: 'Rajmah (Kidney Beans)',
    nameNe: 'राजमा',
    category: 'legumes',
    subcategory: 'beans',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/03ark8un1o1eu8nuijdpw',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 177,
    nutrients: {
      calories: 225,
      protein: 15,
      carbohydrates: 40,
      fat: 0.9,
      fiber: 11,
      potassium: 713,
      phosphorus: 244,
      sodium: 2,
      calcium: 62,
      fluid: 125,
      iron: 5.2,
      zinc: 1.9,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Popular North Indian dish - soak overnight and use excess water method', ne: 'लोकप्रिय उत्तर भारतीय खाना - रातभर भिजाएर धेरै पानी विधि प्रयोग गर्नुहोस्' },
      { en: 'Very high potassium - use small portions only', ne: 'धेरै उच्च पोटासियम - सानो मात्रा मात्र प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'High potassium and phosphorus - severely limit for CKD patients', ne: 'उच्च पोटासियम र फस्फोरस - CKD बिरामीहरूका लागि कडा रूपमा सीमित गर्नुहोस्' },
    ],
    dialysisDay: {
      maxPortion: 0.25,
      notes: 'Quarter cup maximum, well-soaked and drained'
    },
    nonDialysisDay: {
      maxPortion: 0.125,
      notes: 'Very small portions only'
    },
    alternativeNames: {
      en: ['kidney beans', 'red kidney beans', 'phaseolus vulgaris'],
      ne: ['रातो राजमा', 'किडनी बीन्स']
    },
  },
  {
    id: 'soybeans',
    nameEn: 'Soybeans (Cooked)',
    nameNe: 'भटमास',
    category: 'legumes',
    subcategory: 'beans',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/jp3ci3jh0al099brihutj',
    defaultPortion: 1,
    unitEn: 'cup cooked',
    unitNe: 'कप पकाएको',
    weightGrams: 172,
    nutrients: {
      calories: 298,
      protein: 29,
      carbohydrates: 17,
      fat: 15,
      fiber: 10,
      potassium: 886,
      phosphorus: 421,
      sodium: 2,
      calcium: 175,
      fluid: 115,
      iron: 8.8,
      zinc: 1.6,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Extremely high phosphorus and potassium - avoid or use minimal amounts', ne: 'अत्यधिक उच्च फस्फोरस र पोटासियम - बच्नुहोस् वा न्यूनतम मात्रा प्रयोग गर्नुहोस्' },
      { en: 'If used, soak for 24 hours and boil multiple times', ne: 'प्रयोग गर्नुपर्दा २४ घण्टा भिजाएर धेरै पटक उमाल्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Highest phosphorus content among legumes - strictly avoid for kidney patients', ne: 'दालहरूमध्ये सबैभन्दा उच्च फस्फोरस - मृगौला रोगीहरूले कडा रूपमा बच्नुपर्छ' },
    ],
    alternativeNames: {
      en: ['edamame', 'soya beans', 'glycine max'],
      ne: ['सोयाबीन', 'भट्टमास']
    },
  },
  {
    id: 'tofu',
    nameEn: 'Tofu (Firm)',
    nameNe: 'टोफु',
    category: 'legumes',
    subcategory: 'soy-products',
    image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=200',
    defaultPortion: 100,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 100,
    nutrients: {
      calories: 144,
      protein: 17,
      carbohydrates: 3,
      fat: 9,
      fiber: 2,
      potassium: 237,
      phosphorus: 190,
      sodium: 7,
      calcium: 683,
      fluid: 69,
      iron: 2.7,
      zinc: 1.6,
    },
    safetyLevel: 'caution',
    preparationTips: [
      { en: 'Lower potassium than whole soybeans but still high phosphorus', ne: 'पूरै भटमास भन्दा कम पोटासियम तर अझै उच्च फस्फोरस' },
      { en: 'Use small portions as protein source', ne: 'प्रोटिनको स्रोतको रूपमा सानो मात्रा प्रयोग गर्नुहोस्' },
      { en: 'Rinse before cooking to reduce sodium if processed', ne: 'प्रशोधित भएमा सोडियम कम गर्न पकाउनु अघि धुनुहोस्' },
    ],
    medicalNotes: [
      { en: 'High phosphorus and calcium - moderate portions for CKD patients', ne: 'उच्च फस्फोरस र क्यालसियम - CKD बिरामीहरूका लागि मध्यम मात्रा' },
    ],
    alternativeNames: {
      en: ['bean curd', 'soy curd'],
      ne: ['सोया दही', 'बीन कर्ड']
    },
  },
  {
    id: 'nutrila',
    nameEn: 'Nutrila (Processed Soy Product)',
    nameNe: 'न्यूट्रिला',
    category: 'legumes',
    subcategory: 'processed-soy',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/1ofhfpbi8u52qhj57h2xc',
    defaultPortion: 50,
    unitEn: 'grams',
    unitNe: 'ग्राम',
    weightGrams: 50,
    nutrients: {
      calories: 173,
      protein: 26,
      carbohydrates: 15,
      fat: 2,
      fiber: 8,
      potassium: 350,
      phosphorus: 285,
      sodium: 450,
      calcium: 85,
      fluid: 15,
      iron: 4.2,
      zinc: 2.1,
    },
    safetyLevel: 'avoid',
    preparationTips: [
      { en: 'Highly processed soy product - very high sodium and phosphorus', ne: 'अत्यधिक प्रशोधित सोया उत्पादन - धेरै उच्च सोडियम र फस्फोरस' },
      { en: 'Soak well and rinse multiple times before cooking', ne: 'पकाउनु अघि राम्रोसँग भिजाएर धेरै पटक धुनुहोस्' },
      { en: 'Use very small portions due to high mineral content', ne: 'उच्च खनिज सामग्रीको कारण धेरै सानो मात्रा प्रयोग गर्नुहोस्' },
    ],
    medicalNotes: [
      { en: 'Very high sodium and phosphorus - not recommended for CKD patients', ne: 'धेरै उच्च सोडियम र फस्फोरस - CKD बिरामीहरूका लागि सिफारिस गरिँदैन' },
    ],
    alternativeNames: {
      en: ['textured soy protein', 'soy chunks', 'TVP'],
      ne: ['सोया चंक्स', 'टेक्सचर्ड सोया']
    },
  },

  // NUTS & SEEDS (Limited portions)
  {
    id: 'almonds',
    nameEn: 'Almonds',
    nameNe: 'बदाम',
    category: 'nuts-seeds',
    subcategory: 'tree-nuts',
    image: 'https://pub-e001eb4506b145aa938b5d3badbff6a5.r2.dev/attachments/6voyg3pq7dpf0xuk81d9f',
    defaultPortion: 10,
    unitEn: 'pieces',
    unitNe: 'पिस',
    weightGrams: 14,
    nutrients: {
      calories: 83,
      protein: 3,
      carbohydrates: 3,
      fat: 7,
      fiber: 2,
      potassium: 105,
      phosphorus: 68,
      sodium: 0,
      calcium: 38,
      fluid: 1,
      iron: 0.5,
      zinc: 0.4,
    },
    safetyLevel: 'caution',
    medicalNotes: [
      { en: 'High phosphorus - limit to small portions', ne: 'उच्च फस्फोरस - सानो मात्रामा सीमित गर्नुहोस्' },
    ],
  },
];

// Helper functions for food database queries (optimized)
export function getFoodsByCategory(category: string): Food[] {
  return foodDatabase.filter(food => food.category === category).map(applyOverridesSync);
}

export function getFoodsBySubcategory(subcategory: string): Food[] {
  return foodDatabase.filter(food => food.subcategory === subcategory).map(applyOverridesSync);
}

export function getFoodsBySafetyLevel(safetyLevel: 'safe' | 'caution' | 'avoid'): Food[] {
  return foodDatabase.map(applyOverridesSync).filter(food => food.safetyLevel === safetyLevel);
}

export function searchFoods(query: string, language: 'en' | 'ne' = 'en'): Food[] {
  const searchTerm = query.toLowerCase();
  return foodDatabase.map(applyOverridesSync).filter(food => {
    const nameMatch = language === 'en' 
      ? food.nameEn.toLowerCase().includes(searchTerm)
      : food.nameNe.includes(searchTerm);
    
    const alternativeMatch = food.alternativeNames
      ? food.alternativeNames[language].some(name => 
          name.toLowerCase().includes(searchTerm)
        )
      : false;
    
    return nameMatch || alternativeMatch;
  });
}

export function getFoodById(id: string): Food | undefined {
  const food = foodDatabase.find(food => food.id === id);
  return food ? applyOverridesSync(food) : undefined;
}

// Async versions for when overrides are needed
export async function getFoodByIdAsync(id: string): Promise<Food | undefined> {
  const food = foodDatabase.find(food => food.id === id);
  return food ? await applyOverrides(food) : undefined;
}

// Nutritional analysis helpers
export function calculateNutrientsPer100g(food: Food): Food['nutrients'] {
  const ratio = 100 / food.weightGrams;
  return {
    calories: Math.round(food.nutrients.calories * ratio),
    protein: Math.round(food.nutrients.protein * ratio * 10) / 10,
    carbohydrates: Math.round(food.nutrients.carbohydrates * ratio * 10) / 10,
    fat: Math.round(food.nutrients.fat * ratio * 10) / 10,
    fiber: Math.round(food.nutrients.fiber * ratio * 10) / 10,
    potassium: Math.round(food.nutrients.potassium * ratio),
    phosphorus: Math.round(food.nutrients.phosphorus * ratio),
    sodium: Math.round(food.nutrients.sodium * ratio),
    calcium: Math.round(food.nutrients.calcium * ratio),
    fluid: Math.round(food.nutrients.fluid * ratio),
    iron: Math.round(food.nutrients.iron * ratio * 10) / 10,
    zinc: Math.round(food.nutrients.zinc * ratio * 10) / 10,
  };
}

export function isHighPotassium(food: Food): boolean {
  const per100g = calculateNutrientsPer100g(food);
  return per100g.potassium > 200;
}

export function isHighPhosphorus(food: Food): boolean {
  const per100g = calculateNutrientsPer100g(food);
  return per100g.phosphorus > 150;
}

export function isHighSodium(food: Food): boolean {
  const per100g = calculateNutrientsPer100g(food);
  return per100g.sodium > 300;
}

// Function to refresh overrides (call this when admin makes changes)
export const refreshFoodOverrides = async () => {
  await loadFoodOverrides();
};

// Get all foods with overrides applied (optimized)
export function getAllFoods(): Food[] {
  return foodDatabase.map(applyOverridesSync);
}

// Async version for when overrides are needed
export async function getAllFoodsAsync(): Promise<Food[]> {
  await loadFoodOverrides();
  return foodDatabase.map(applyOverridesSync);
}

// Initialize overrides loading in background
setTimeout(() => {
  loadFoodOverrides();
}, 100);
